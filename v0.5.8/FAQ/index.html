<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>FAQ · BinaryBuilder.jl</title><meta name="title" content="FAQ · BinaryBuilder.jl"/><meta property="og:title" content="FAQ · BinaryBuilder.jl"/><meta property="twitter:title" content="FAQ · BinaryBuilder.jl"/><meta name="description" content="Documentation for BinaryBuilder.jl."/><meta property="og:description" content="Documentation for BinaryBuilder.jl."/><meta property="twitter:description" content="Documentation for BinaryBuilder.jl."/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">BinaryBuilder.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><a class="tocitem" href="../building/">Building Packages</a></li><li><a class="tocitem" href="../build_tips/">Build Tips</a></li><li><a class="tocitem" href="../jll/">JLL packages</a></li><li class="is-active"><a class="tocitem" href>FAQ</a></li><li><a class="tocitem" href="../troubleshooting/">Build Troubleshooting</a></li><li><span class="tocitem">Internals</span><ul><li><a class="tocitem" href="../rootfs/">RootFS</a></li><li><a class="tocitem" href="../environment_variables/">Environment Variables</a></li><li><a class="tocitem" href="../tricksy_gotchas/">Tricksy Gotchas</a></li><li><a class="tocitem" href="../reference/">Reference</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>FAQ</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>FAQ</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/JuliaPackaging/BinaryBuilder.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/JuliaPackaging/BinaryBuilder.jl/blob/master/docs/src/FAQ.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Frequently-Asked-Questions"><a class="docs-heading-anchor" href="#Frequently-Asked-Questions">Frequently Asked Questions</a><a id="Frequently-Asked-Questions-1"></a><a class="docs-heading-anchor-permalink" href="#Frequently-Asked-Questions" title="Permalink"></a></h1><h3 id="I&#39;m-having-trouble-compiling-project-name-here"><a class="docs-heading-anchor" href="#I&#39;m-having-trouble-compiling-project-name-here">I&#39;m having trouble compiling <code>&lt;project name here&gt;</code></a><a id="I&#39;m-having-trouble-compiling-project-name-here-1"></a><a class="docs-heading-anchor-permalink" href="#I&#39;m-having-trouble-compiling-project-name-here" title="Permalink"></a></h3><p>First, make sure that you can compile that project natively on whatever platform you&#39;re attempting to compile it on.  Once you are assured of that, search around the internet to see if anyone else has run into issues cross-compiling that project for that platform.  In particular, most smaller projects should be just fine, but larger projects (and especially anything that does any kind of bootstrapping) may need some extra smarts smacked into their build system to support cross-compiling.  Finally, if you&#39;re still stuck, try reaching out for help on the <a href="https://julialang.slack.com/archives/C674ELDNX"><code>#binarybuilder</code> channel</a> in the JuliaLang slack.</p><h3 id="How-do-I-use-this-to-compile-my-Julia-code?"><a class="docs-heading-anchor" href="#How-do-I-use-this-to-compile-my-Julia-code?">How do I use this to compile my Julia code?</a><a id="How-do-I-use-this-to-compile-my-Julia-code?-1"></a><a class="docs-heading-anchor-permalink" href="#How-do-I-use-this-to-compile-my-Julia-code?" title="Permalink"></a></h3><p>This package does not compile Julia code; it compiles C/C++/Fortran dependencies.  Think about that time you wanted to use <code>IJulia</code> and you needed to download/install <code>libnettle</code>.  The purpose of this package is to make generated tarballs that can be downloaded/installed painlessly as possible.</p><h3 id="What-is-this-I-hear-about-the-macOS-SDK-license-agreement?"><a class="docs-heading-anchor" href="#What-is-this-I-hear-about-the-macOS-SDK-license-agreement?">What is this I hear about the macOS SDK license agreement?</a><a id="What-is-this-I-hear-about-the-macOS-SDK-license-agreement?-1"></a><a class="docs-heading-anchor-permalink" href="#What-is-this-I-hear-about-the-macOS-SDK-license-agreement?" title="Permalink"></a></h3><p>Apple restricts distribution and usage of the macOS SDK, a necessary component to build software for macOS targets.  Please read the <a href="https://images.apple.com/legal/sla/docs/xcode.pdf">Apple and Xcode SDK agreement</a> for more information on the restrictions and legal terms you agree to when using the SDK to build software for Apple operating systems. Copyright law is a complex area and you should not take legal advice from FAQs on the internet. This toolkit is designed to primarily run on Linux, though it can of course be used within a virtualized environment on a macOS machine or directly by running Linux Apple hardware. The Docker runner implements the virtualization approach on macOS machines.  <code>BinaryBuilder.jl</code>, by default, will not automatically download or use the macOS SDK on non-apple host operating systems, unless the <code>BINARYBUILDER_AUTOMATIC_APPLE</code> environment variable is set to <code>true</code>.</p><h3 id="Are-there-other-environment-variables-I-can-use?"><a class="docs-heading-anchor" href="#Are-there-other-environment-variables-I-can-use?">Are there other environment variables I can use?</a><a id="Are-there-other-environment-variables-I-can-use?-1"></a><a class="docs-heading-anchor-permalink" href="#Are-there-other-environment-variables-I-can-use?" title="Permalink"></a></h3><p>Yes, <a href="../environment_variables/">take a look</a>.</p><h3 id="Hey,-this-is-cool,-can-I-use-this-for-my-non-Julia-related-project?"><a class="docs-heading-anchor" href="#Hey,-this-is-cool,-can-I-use-this-for-my-non-Julia-related-project?">Hey, this is cool, can I use this for my non-Julia related project?</a><a id="Hey,-this-is-cool,-can-I-use-this-for-my-non-Julia-related-project?-1"></a><a class="docs-heading-anchor-permalink" href="#Hey,-this-is-cool,-can-I-use-this-for-my-non-Julia-related-project?" title="Permalink"></a></h3><p>Absolutely!  There&#39;s nothing Julia-specific about the binaries generated by the cross-compilers used by <code>BinaryBuilder.jl</code>.  Although the best interface for interacting with this software will always be the Julia interface defined within this package, you are free to use these software tools for other projects as well.  Note that the cross-compiler image is built through a multistage bootstrapping process, <a href="https://github.com/JuliaPackaging/Yggdrasil">see this repository for more information</a>.  Further note the <strong>macOS SDK license agreement</strong> tidbit above.</p><h3 id="At-line-XXX,-ABORTED-(Operation-not-permitted)!"><a class="docs-heading-anchor" href="#At-line-XXX,-ABORTED-(Operation-not-permitted)!">At line XXX, ABORTED (Operation not permitted)!</a><a id="At-line-XXX,-ABORTED-(Operation-not-permitted)!-1"></a><a class="docs-heading-anchor-permalink" href="#At-line-XXX,-ABORTED-(Operation-not-permitted)!" title="Permalink"></a></h3><p>Some linux distributions have a bug in their <code>overlayfs</code> implementation that prevents us from mounting overlay filesystems within user namespaces.  See <a href="https://bugs.launchpad.net/ubuntu/+source/linux/+bug/1531747">this Ubuntu kernel bug report</a> for a description of the situation and how Ubuntu has patched it in their kernels.  To work around this, you can launch <code>BinaryBuilder.jl</code> in &quot;privileged container&quot; mode.  BinaryBuilder should auto-detect this situation, however if the autodetection is not working or you want to silence the warning, you can set the <code>BINARYBUILDER_RUNNER</code> environment variable to <code>privileged</code>.  Unfortunately, this involves running <code>sudo</code> every time you launch into a BinaryBuilder session, but on the other hand, this successfully works around the issue on distributions such as Arch linux.</p><h3 id="I-have-to-build-a-very-small-project-without-a-Makefile,-what-do-I-have-to-do?"><a class="docs-heading-anchor" href="#I-have-to-build-a-very-small-project-without-a-Makefile,-what-do-I-have-to-do?">I have to build a very small project without a Makefile, what do I have to do?</a><a id="I-have-to-build-a-very-small-project-without-a-Makefile,-what-do-I-have-to-do?-1"></a><a class="docs-heading-anchor-permalink" href="#I-have-to-build-a-very-small-project-without-a-Makefile,-what-do-I-have-to-do?" title="Permalink"></a></h3><p>What BinaryBuilder needs is to find the relevant file (shared libraries, or executables, etc...) organised under the <code>$prefix</code> directory: libraries should go to <code>${libdir}</code>, executables to <code>${bindir}</code>.  You may need to create those directories.  You are free to choose whether to create a simple Makefile to build the project or to do everything within the <code>build_tarballs.jl</code> script. When the script completes, BinaryBuilder expects to find at least one artifact <em>built for the expected architecture</em> in either <code>${libdir}</code> or <code>${bindir}</code>. Remember also that you should use the standard environment variables like <code>CC</code>, <code>CXX</code>, <code>CFLAGS</code>, <code>LDFLAGS</code> as appropriate in order to cross compile.  See the list of variables in the <a href="../build_tips/">Tips for Building Packages</a> section.</p><h3 id="Can-I-open-a-shell-in-a-particular-build-environment-for-doing-some-quick-tests?"><a class="docs-heading-anchor" href="#Can-I-open-a-shell-in-a-particular-build-environment-for-doing-some-quick-tests?">Can I open a shell in a particular build environment for doing some quick tests?</a><a id="Can-I-open-a-shell-in-a-particular-build-environment-for-doing-some-quick-tests?-1"></a><a class="docs-heading-anchor-permalink" href="#Can-I-open-a-shell-in-a-particular-build-environment-for-doing-some-quick-tests?" title="Permalink"></a></h3><p>Yes!  You can use <a href="../reference/#BinaryBuilderBase.runshell"><code>BinaryBuilder.runshell(platform)</code></a> to quickly start a shell in the current directory, without having to set up a working <code>build_tarballs.jl</code> script.  For example,</p><pre><code class="nohighlight hljs">julia -e &#39;using BinaryBuilder; BinaryBuilder.runshell(Platform(&quot;i686&quot;, &quot;windows&quot;))&#39;</code></pre><p>will open a shell in a Windows 32-bit build environment, without any source loaded.  The current working directory of your system will be mounted on <code>${WORKSPACE}</code> within this BinaryBuilder environment.</p><h3 id="Can-I-publish-a-JLL-package-locally-without-going-through-Yggdrasil?"><a class="docs-heading-anchor" href="#Can-I-publish-a-JLL-package-locally-without-going-through-Yggdrasil?">Can I publish a JLL package locally without going through Yggdrasil?</a><a id="Can-I-publish-a-JLL-package-locally-without-going-through-Yggdrasil?-1"></a><a class="docs-heading-anchor-permalink" href="#Can-I-publish-a-JLL-package-locally-without-going-through-Yggdrasil?" title="Permalink"></a></h3><p>You can always build a JLL package on your machine with the <code>--deploy</code> flag to the <code>build_tarballs.jl</code> script.  Read the help (<code>--help</code>) for more information.</p><p>A common use case is that you want to build a JLL package for, say, <code>Libfoo</code>, that will be used as dependency to build <code>Quxlib</code>, and you want to make sure that building both <code>Libfoo</code> and <code>Quxlib</code> will work before submitting all the pull requests to <a href="https://github.com/JuliaPackaging/Yggdrasil/">Yggdrasil</a>.  You can prepare the <code>build_tarballs.jl</code> script for <code>Libfoo</code> and then build and deploy it with</p><pre><code class="nohighlight hljs">julia build_tarballs.jl --debug --verbose --deploy=&quot;MY_USERNAME/Libfoo_jll.jl&quot;</code></pre><p>replacing <code>MY_USERNAME</code> with your GitHub username: this will build the tarballs for all the platforms requested and upload them to a release of the <code>MY_USERNAME/Libfoo_jll.jl</code>, where the JLL package will also be created.  As explained above, you can pass argument the list of triplets of the platforms for you which you want to build the tarballs, in case you want to compile only some of them.  In the Julia REPL, you can install this package as any unregistered package with</p><pre><code class="language-julia hljs">]add https://github.com/MY_USERNAME/Libfoo_jll.jl.git</code></pre><p>or develop it with</p><pre><code class="language-julia hljs">]dev https://github.com/MY_USERNAME/Libfoo_jll.jl.git</code></pre><p>Since this package is unregistered, you have to use the full <a href="https://julialang.github.io/Pkg.jl/v1/api/#Pkg.PackageSpec"><code>PackageSpec</code></a> specification to add it as dependency of the local builder for <code>Quxlib</code>:</p><pre><code class="language-julia hljs">    Dependency(PackageSpec(; name = &quot;Libfoo_jll&quot;,  uuid = &quot;...&quot;, url = &quot;https://github.com/MY_USERNAME/Libfoo_jll.jl.git&quot;))</code></pre><p>You can of course in turn build and deploy this package with</p><pre><code class="nohighlight hljs">julia build_tarballs.jl --debug --verbose --deploy=&quot;MY_USERNAME/Quxlib_jll.jl&quot;</code></pre><p>Note that <code>PackageSpec</code> can also point to a local path: e.g., <code>PackageSpec(; name=&quot;Libfoo_jll&quot;, uuid=&quot;...&quot;, path=&quot;/home/myname/.julia/dev/Libfoo_jll&quot;)</code>.  This is particularly useful when <a href="../building/#Building-a-custom-JLL-package-locally">Building a custom JLL package locally</a>, instead of deploying it to a remote Git repository.</p><h3 id="What-are-those-numbers-in-the-list-of-sources?-How-do-I-get-them?"><a class="docs-heading-anchor" href="#What-are-those-numbers-in-the-list-of-sources?-How-do-I-get-them?">What are those numbers in the list of sources?  How do I get them?</a><a id="What-are-those-numbers-in-the-list-of-sources?-How-do-I-get-them?-1"></a><a class="docs-heading-anchor-permalink" href="#What-are-those-numbers-in-the-list-of-sources?-How-do-I-get-them?" title="Permalink"></a></h3><p>The list of sources is a vector of <a href="../reference/#BinaryBuilderBase.AbstractSource"><code>BinaryBuilder.AbstractSource</code></a>s.  What the hash is depends on what the source is:</p><ul><li><p>For a <a href="../reference/#BinaryBuilderBase.FileSource"><code>FileSource</code></a> or an <a href="../reference/#BinaryBuilderBase.ArchiveSource"><code>ArchiveSource</code></a>, the hash is a 64-character SHA256 checksum.  If you have a copy of that file, you can compute the hash in Julia with</p><pre><code class="language-julia hljs">using SHA
open(path_to_the_file, &quot;r&quot;) do f
     bytes2hex(sha256(f))
end</code></pre><p>where <code>path_to_the_file</code> is a string with the path to the file.  Alternatively, you can use the command line utilities <code>curl</code> and <code>shasum</code> to compute the hash of a remote file:</p><pre><code class="nohighlight hljs">$ curl -L http://example.org/file.tar.gz | shasum -a 256</code></pre><p>replacing <code>http://example.org/file.tar.gz</code> with the actual URL of the file you want to download.</p></li><li><p>For a <a href="../reference/#BinaryBuilderBase.GitSource"><code>GitSource</code></a>, the hash is the 40-character SHA1 hash of the revision you want to checkout.  For reproducibility you must indicate a specific revision, and not a branch or tag name, which are moving targets.</p></li></ul><h3 id="Now-that-I-have-a-published-and-versioned-jll-package,-what-compat-bounds-do-I-put-in-its-dependents?-What-if-the-upstream-does-not-follow-SemVer?"><a class="docs-heading-anchor" href="#Now-that-I-have-a-published-and-versioned-jll-package,-what-compat-bounds-do-I-put-in-its-dependents?-What-if-the-upstream-does-not-follow-SemVer?">Now that I have a published and versioned <code>jll</code> package, what compat bounds do I put in its dependents? What if the upstream does not follow SemVer?</a><a id="Now-that-I-have-a-published-and-versioned-jll-package,-what-compat-bounds-do-I-put-in-its-dependents?-What-if-the-upstream-does-not-follow-SemVer?-1"></a><a class="docs-heading-anchor-permalink" href="#Now-that-I-have-a-published-and-versioned-jll-package,-what-compat-bounds-do-I-put-in-its-dependents?-What-if-the-upstream-does-not-follow-SemVer?" title="Permalink"></a></h3><p>Imagine there is a package <code>CoolFortranLibrary_jll</code> that is a build of an upstream Fortran library <code>CoolFortranLibrary</code>. We will abbreviate these to <code>CFL_jll</code> and <code>CFL</code>.</p><p>Once you have <code>CFL_jll</code> you might want to have a Julia project that depends on it. As usual you put a compat bound for <code>CFL_jll</code> (the version number of upstream <code>CFL</code> and the jll version of <code>CFL_jll</code> are typically set equal during the <code>jll</code> registration). If you know for a fact that upstream <code>CFL</code> follows SemVer, then you just set compat bounds as if it was any other Julia project. However, not all ecosystems follow SemVer. The following two cases are quite common:</p><ol><li><code>CFL</code> releases version 1.1.1 and version 1.1.2 that are incompatible. A real world example is Boost (which breaks the ABI in every single release because they embed the full version number in the soname of libraries). If you have a typical permissive semver-style compat section in a package that depends on <code>CFL_jll</code>, then your package will break whenever <code>CFL_jll</code> gets a new release. To solve this issue you have to use &quot;hyphen style&quot; compat bounds like <code>&quot;0.9.0 - 1.1.2&quot;</code>. This leads to a separate problem: you need to change the compat bound every time there is a new <code>CFL_jll</code> release: this is the least bad option though – it causes more annoyance for developers but it ensures users never end up with broken installs. And bots like <code>CompatHelper</code> can mostly automate that issue.</li><li><code>CFL</code> releases versions 1.0.0 and 2.0.0 that are perfectly compatible. The Linux kernel, Chrome, Firefox, and curl are such examples. This causes annoying churn, as the developper still needs to update compat bounds in packages that depend on <code>CFL_jll</code>. Or, if you have a very strong belief in <code>CFL</code>&#39;s commitment to backward compatibility, you can put an extremely generous compat bound like <code>&quot;&gt;= 1.0.0&quot;</code>.</li></ol><p>While the SemVer (and Julia&#39;s) &quot;conservative&quot; approach to compatibility ensures there will never be runtime crashes due to installed incompatible libraries, you might still end up with systems that refuse to install in the first place (which the Julia ecosystem considers the lesser evil). E.g., package <code>A.jl</code> that depends on newer versions of <code>CLF</code> and package <code>B.jl</code> that depends on older versions can not be installed at the same time. This happens less often in ecosystems that follow semver, but might happen relatively often in an ecosystem that does not. Thus developers that rely on <code>jll</code> packages that do not follow semver should be proactive in updating their compat bonds (and are strongly encouraged to heavily use the <code>CompatHelper</code> bot).</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../jll/">« JLL packages</a><a class="docs-footer-nextpage" href="../troubleshooting/">Build Troubleshooting »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="auto">Automatic (OS)</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.2.1 on <span class="colophon-date" title="Friday 16 February 2024 22:32">Friday 16 February 2024</span>. Using Julia version 1.7.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
