<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Build Troubleshooting · BinaryBuilder.jl</title><meta name="title" content="Build Troubleshooting · BinaryBuilder.jl"/><meta property="og:title" content="Build Troubleshooting · BinaryBuilder.jl"/><meta property="twitter:title" content="Build Troubleshooting · BinaryBuilder.jl"/><meta name="description" content="Documentation for BinaryBuilder.jl."/><meta property="og:description" content="Documentation for BinaryBuilder.jl."/><meta property="twitter:description" content="Documentation for BinaryBuilder.jl."/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">BinaryBuilder.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><a class="tocitem" href="../building/">Building Packages</a></li><li><a class="tocitem" href="../build_tips/">Build Tips</a></li><li><a class="tocitem" href="../jll/">JLL packages</a></li><li><a class="tocitem" href="../FAQ/">FAQ</a></li><li class="is-active"><a class="tocitem" href>Build Troubleshooting</a><ul class="internal"><li><a class="tocitem" href="#All-platforms"><span>All platforms</span></a></li><li><a class="tocitem" href="#Musl-Linux"><span>Musl Linux</span></a></li><li><a class="tocitem" href="#PowerPC-Linux"><span>PowerPC Linux</span></a></li><li><a class="tocitem" href="#FreeBSD"><span>FreeBSD</span></a></li><li><a class="tocitem" href="#Windows"><span>Windows</span></a></li><li><a class="tocitem" href="#macOS"><span>macOS</span></a></li></ul></li><li><span class="tocitem">Internals</span><ul><li><a class="tocitem" href="../rootfs/">RootFS</a></li><li><a class="tocitem" href="../environment_variables/">Environment Variables</a></li><li><a class="tocitem" href="../tricksy_gotchas/">Tricksy Gotchas</a></li><li><a class="tocitem" href="../reference/">Reference</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Build Troubleshooting</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Build Troubleshooting</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/JuliaPackaging/BinaryBuilder.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/JuliaPackaging/BinaryBuilder.jl/blob/master/docs/src/troubleshooting.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Build-Troubleshooting"><a class="docs-heading-anchor" href="#Build-Troubleshooting">Build Troubleshooting</a><a id="Build-Troubleshooting-1"></a><a class="docs-heading-anchor-permalink" href="#Build-Troubleshooting" title="Permalink"></a></h1><p>This page collects some known build errors and trick how to fix them.</p><p><em>If you have additional tips, please submit a PR with suggestions.</em></p><h2 id="All-platforms"><a class="docs-heading-anchor" href="#All-platforms">All platforms</a><a id="All-platforms-1"></a><a class="docs-heading-anchor-permalink" href="#All-platforms" title="Permalink"></a></h2><h3 id="General-comments"><a class="docs-heading-anchor" href="#General-comments">General comments</a><a id="General-comments-1"></a><a class="docs-heading-anchor-permalink" href="#General-comments" title="Permalink"></a></h3><p>While below you will find some tips about common problems found when building packages in BinaryBuilder, keep in mind that if something fails during the build, there is not a magic recipe to fix it: you will need to understand what the problem is.  Most of the time it&#39;s a matter of trial-and-error.  The best recommendation is to access the build environment and carefully read the log files generated by the build systems: it is not uncommon that build systems would only print to screen misleading error messages, and the actual problem is completely different (e.g. &quot;library XYZ can&#39;t be found&quot;, when the problem instead is that the command they run to look for library XYZ fails for unrelated reasons, for example for a wrong compiler flag used in the check).  Having an understanding of what the build system is doing would also be extremely useful.</p><p>You are welcome to open a pull request to <a href="https://github.com/JuliaPackaging/Yggdrasil/">Yggdrasil</a> with a non-working build recipe, or ask for help in the <code>#binarybuilder</code> channel in the <a href="https://julialang.org/slack/">JuliaLang Slack</a>.  Someone will likely help you out if and when they are available, like for any support provided by volunteers.</p><h3 id="How-to-retrieve-in-progress-build-script"><a class="docs-heading-anchor" href="#How-to-retrieve-in-progress-build-script">How to retrieve in-progress build script</a><a id="How-to-retrieve-in-progress-build-script-1"></a><a class="docs-heading-anchor-permalink" href="#How-to-retrieve-in-progress-build-script" title="Permalink"></a></h3><p>If the Wizard-based build fails after the first platform target, the Wizard may occasionally exit without resumability (because the only resume mode is to retry the failed platform). In this situation, the last build state and in-progress build script may be retrieved using the following steps:</p><pre><code class="nohighlight hljs">state = BinaryBuilder.Wizard.load_wizard_state() # select &#39;resume&#39;
BinaryBuilder.Wizard.print_build_tarballs(stdout, state)</code></pre><p>The build script may then be edited as appropriate – for example to disable the failing platform – and rerun directly with <code>julia  build_tarballs.jl --debug --verbose</code> (see <a href="https://docs.binarybuilder.org/dev/#Manually-create-or-edit-build_tarballs.jl">manual build documentation</a>) to debug and complete <em>without</em> starting from scratch.</p><h3 id="Header-files-of-the-dependencies-can&#39;t-be-found"><a class="docs-heading-anchor" href="#Header-files-of-the-dependencies-can&#39;t-be-found">Header files of the dependencies can&#39;t be found</a><a id="Header-files-of-the-dependencies-can&#39;t-be-found-1"></a><a class="docs-heading-anchor-permalink" href="#Header-files-of-the-dependencies-can&#39;t-be-found" title="Permalink"></a></h3><p>Sometimes the build system can&#39;t find the header files of the dependencies, even if they&#39;re properly installed.  When this happens, you have to inform the C/C++ preprocessor where the files are.</p><p>For example, if the project uses Autotools you can set the <code>CPPFLAGS</code> environment variable:</p><pre><code class="language-sh hljs">export CPPFLAGS=&quot;-I${includedir}&quot;
./configure --prefix=${prefix} --build=${MACHTYPE} --host=${target}
make -j${nprocs}
make install</code></pre><p>See for example <a href="https://github.com/JuliaPackaging/Yggdrasil/blob/9a1ae803823e0dba7628bc71ff794d0c79e39c95/C/Cairo/build_tarballs.jl#L16-L17">Cairo</a> build script.</p><p>If instead the project uses CMake you&#39;ll need to use a different environment variable, since CMake ignores <code>CPPFLAGS</code>.  If the compiler that can&#39;t find the header file is the C one, you need to add the path to the <code>CFLAGS</code> variable (e.g., <code>CFLAGS=&quot;-I${includedir}&quot;</code>), in case it&#39;s the C++ one you have to set the <code>CXXFLAGS</code> variable (e.g., <code>CXXFLAGS=&quot;-I${includedir}&quot;</code>).</p><h3 id="Libraries-of-the-dependencies-can&#39;t-be-found"><a class="docs-heading-anchor" href="#Libraries-of-the-dependencies-can&#39;t-be-found">Libraries of the dependencies can&#39;t be found</a><a id="Libraries-of-the-dependencies-can&#39;t-be-found-1"></a><a class="docs-heading-anchor-permalink" href="#Libraries-of-the-dependencies-can&#39;t-be-found" title="Permalink"></a></h3><p>Like in the section above, it may happen that the build system fails to find the libraries of the dependencies, even when they&#39;re installed to the right place, i.e. in the <code>${libdir}</code> directory.  In these cases, you have to inform the linker where the libraries are by passing the option <code>-L${libdir}</code>.  The details of how to do that depend on the specific build system in use.</p><p>For Autotools- and CMake-based builds, you can the set the <code>LDFLAGS</code> environment variable:</p><pre><code class="language-sh hljs">export LDFLAGS=&quot;-L${libdir}&quot;
./configure --prefix=${prefix} --build=${MACHTYPE} --host=${target}
make -j${nprocs}
make install</code></pre><p>See for example <a href="https://github.com/JuliaPackaging/Yggdrasil/blob/dd1d1d0fbe6fee41806691e11b900961f9001a81/L/libwebp/build_tarballs.jl#L19-L21">libwebp</a> build script (in this case this was needed only when building for FreeBSD).</p><h3 id="Old-Autoconf-helper-scripts"><a class="docs-heading-anchor" href="#Old-Autoconf-helper-scripts">Old Autoconf helper scripts</a><a id="Old-Autoconf-helper-scripts-1"></a><a class="docs-heading-anchor-permalink" href="#Old-Autoconf-helper-scripts" title="Permalink"></a></h3><p>Packages using Autoconf come with some helper scripts – like <code>config.sub</code> and <code>config.guess</code> – that the upstream developers need to keep up-to-date in order to get the latest improvements.  Some packages ship very old copies of these scripts, that for example don&#39;t know about the Musl C library.  In that case, after running <code>./configure</code> you may get an error like</p><pre><code class="nohighlight hljs">checking build system type... Invalid configuration `x86_64-linux-musl&#39;: system `musl&#39; not recognized
configure: error: /bin/sh ./config.sub x86_64-linux-musl failed</code></pre><p>The <code>BinaryBuilder</code> environment provides the utility <a href="../build_tips/#utils_build_env"><code>update_configure_scripts</code></a> to automatically update these scripts, call it before <code>./configure</code>:</p><pre><code class="language-sh hljs">update_configure_scripts
./configure --prefix=${prefix} --build=${MACHTYPE} --host=${target}
make -j${nproc}
make install</code></pre><h3 id="Building-with-an-old-GCC-version-a-library-that-has-dependencies-built-with-newer-GCC-versions"><a class="docs-heading-anchor" href="#Building-with-an-old-GCC-version-a-library-that-has-dependencies-built-with-newer-GCC-versions">Building with an old GCC version a library that has dependencies built with newer GCC versions</a><a id="Building-with-an-old-GCC-version-a-library-that-has-dependencies-built-with-newer-GCC-versions-1"></a><a class="docs-heading-anchor-permalink" href="#Building-with-an-old-GCC-version-a-library-that-has-dependencies-built-with-newer-GCC-versions" title="Permalink"></a></h3><p>The keyword argument <code>preferred_gcc_version</code> to the <code>build_tarballs</code> function allows you to select a newer compiler to build a library, if needed.  Pure C libraries have good compatibility so that a library built with a newer compiler should be able to run on a system using an older GCC version without problems.  However, keep in mind that each GCC version in <code>BinaryBuilder.jl</code> comes bundled with a specific version of binutils  – which provides the <code>ld</code> linker – see <a href="https://github.com/JuliaPackaging/Yggdrasil/blob/master/RootFS.md#compiler-shards">this table</a>.</p><p><code>ld</code> is quite picky and a given version of this tool doesn&#39;t like to link a library linked with a newer version: this means that if you build a library with, say, GCC v6, you&#39;ll need to build all libraries depending on it with GCC &gt;= v6.  If you fail to do so, you&#39;ll get a cryptic error like this:</p><pre><code class="nohighlight hljs">/opt/x86_64-linux-gnu/bin/../lib/gcc/x86_64-linux-gnu/4.8.5/../../../../x86_64-linux-gnu/bin/ld: /workspace/destdir/lib/libvpx.a(vp8_cx_iface.c.o): unrecognized relocation (0x2a) in section `.text&#39;
/opt/x86_64-linux-gnu/bin/../lib/gcc/x86_64-linux-gnu/4.8.5/../../../../x86_64-linux-gnu/bin/ld: final link failed: Bad value</code></pre><p>The solution is to build the downstream libraries with at least the maximum of the GCC versions used by the dependencies:</p><pre><code class="language-julia hljs">build_tarballs(ARGS, name, version, sources, script, platforms, products, dependencies; preferred_gcc_version=v&quot;8&quot;)</code></pre><p>For instance, FFMPEG <a href="https://github.com/JuliaPackaging/Yggdrasil/blob/9a1ae803823e0dba7628bc71ff794d0c79e39c95/F/FFMPEG/build_tarballs.jl#L140">has to be built with GCC v8</a> because LibVPX <a href="https://github.com/giordano/Yggdrasil/blob/2b13acd75081bc8105685602fcad175296264243/L/LibVPX/build_tarballs.jl">requires GCC v8</a>.</p><p>Generally speaking, we try to build with the as old as possible version of GCC (v4.8.5 being the oldest one currently available), for maximum compatibility.</p><h3 id="Running-foreign-executables"><a class="docs-heading-anchor" href="#Running-foreign-executables">Running foreign executables</a><a id="Running-foreign-executables-1"></a><a class="docs-heading-anchor-permalink" href="#Running-foreign-executables" title="Permalink"></a></h3><p>The build environment provided by <code>BinaryBuilder</code> is a <code>x86_64-linux-musl</code>, and it can run executables for the following platforms: <code>x86_64-linux-musl</code>, <code>x86_64-linux-gnu</code>, <code>i686-linux-gnu</code>.  For all other platforms, if the build system tries to run a foreign executable you&#39;ll get an error, usually something like</p><pre><code class="nohighlight hljs">./foreign.exe: line 1: ELF��
                       @@xG@8@@@@@@���@�@@����A�A����A�A���@�@: not found
./foreign.exe: line 1: syntax error: unexpected end of file (expecting &quot;)&quot;)</code></pre><p>This is one of worst cases when cross-compiling, and there isn&#39;t a simple solution.  You have to look into the build process to see if running the executable can be skipped (see for example the patch to not run <code>dot</code> in <a href="https://github.com/JuliaPackaging/Yggdrasil/pull/351">Yggdrasil#351</a>), or replaced by something else.  If the executable is a compile-time only utility, try to build it with the native compiler (see for example the patch to build a native <code>mkdefs</code> in <a href="https://github.com/JuliaPackaging/Yggdrasil/pull/351">Yggdrasil#351</a>)</p><h2 id="Musl-Linux"><a class="docs-heading-anchor" href="#Musl-Linux">Musl Linux</a><a id="Musl-Linux-1"></a><a class="docs-heading-anchor-permalink" href="#Musl-Linux" title="Permalink"></a></h2><h3 id="Error-in-definition-of-posix_memalign"><a class="docs-heading-anchor" href="#Error-in-definition-of-posix_memalign">Error in definition of <code>posix_memalign</code></a><a id="Error-in-definition-of-posix_memalign-1"></a><a class="docs-heading-anchor-permalink" href="#Error-in-definition-of-posix_memalign" title="Permalink"></a></h3><p>Compiling for Musl platforms can sometimes fail with the error message</p><pre><code class="nohighlight hljs">/opt/x86_64-linux-musl/x86_64-linux-musl/sys-root/usr/include/stdlib.h:99:5: error: from previous declaration ‘int posix_memalign(void**, size_t, size_t)’
 int posix_memalign (void **, size_t, size_t);
     ^</code></pre><p>This is due to a bug in older versions of GCC targeting this libc, see <a href="https://github.com/JuliaPackaging/BinaryBuilder.jl/issues/387">BinaryBuilder.jl#387</a> for more details. There are two options to solve this issue:</p><ul><li>require GCC 6 by using <code>build_tarballs(...; preferred_gcc_version=v&quot;6&quot;)</code>. This may be the simplest option in some cases. See for example <a href="https://github.com/JuliaPackaging/Yggdrasil/pull/3974">Yggdrasil#3974</a></li><li>if using older versions of GCC is important for wider compatibility, you can apply <a href="https://github.com/JuliaPackaging/Yggdrasil/blob/48ac662cd53e02aff0189c81008874a04f7172c7/Z/ZeroMQ/bundled/patches/mm_malloc.patch">this patch</a> to the build toolchain. See for example <a href="https://github.com/JuliaPackaging/Yggdrasil/blob/48ac662cd53e02aff0189c81008874a04f7172c7/Z/ZeroMQ/build_tarballs.jl#L20-L26">ZeroMQ</a> recipe.</li></ul><h2 id="PowerPC-Linux"><a class="docs-heading-anchor" href="#PowerPC-Linux">PowerPC Linux</a><a id="PowerPC-Linux-1"></a><a class="docs-heading-anchor-permalink" href="#PowerPC-Linux" title="Permalink"></a></h2><h3 id="Shared-library-not-built"><a class="docs-heading-anchor" href="#Shared-library-not-built">Shared library not built</a><a id="Shared-library-not-built-1"></a><a class="docs-heading-anchor-permalink" href="#Shared-library-not-built" title="Permalink"></a></h3><p>Sometimes the shared library for <code>powerpc64le-linux-gnu</code> is not built after a successful compilation, and audit fails because only the static library has been compiled.  If the build uses Autotools, this most likely happens because the <code>configure</code> script was generated with a very old version of Autotools, which didn&#39;t know how to build shared libraries for this system.  The trick here is to regenerate the <code>configure</code> script with <code>autoreconf</code>:</p><pre><code class="language-sh hljs">autoreconf -vi
./configure --prefix=${prefix} --build=${MACHTYPE} --host=${target}
make -j${nproc}
make install</code></pre><p>See for example the builder for <a href="https://github.com/JuliaPackaging/Yggdrasil/blob/78fb3a7b4d00f3bc7fd2b1bcd24e96d6f31d6c4b/G/Giflib/build_tarballs.jl">Giflib</a>.  If you need to regenerate <code>configure</code>, you&#39;ll probably need to run <a href="../build_tips/#utils_build_env"><code>update_configure_scripts</code></a> to make other platforms work as well.</p><h2 id="FreeBSD"><a class="docs-heading-anchor" href="#FreeBSD">FreeBSD</a><a id="FreeBSD-1"></a><a class="docs-heading-anchor-permalink" href="#FreeBSD" title="Permalink"></a></h2><h3 id="undefined-reference-to-backtrace_symbols&#39;"><a class="docs-heading-anchor" href="#undefined-reference-to-backtrace_symbols&#39;"><code>undefined reference to `backtrace_symbols&#39;</code></a><a id="undefined-reference-to-backtrace_symbols&#39;-1"></a><a class="docs-heading-anchor-permalink" href="#undefined-reference-to-backtrace_symbols&#39;" title="Permalink"></a></h3><p>If compilation fails because of the following errors</p><pre><code class="nohighlight hljs">undefined reference to `backtrace_symbols&#39;
undefined reference to `backtrace&#39;</code></pre><p>then you need to link to <code>execinfo</code>:</p><pre><code class="language-sh hljs">if [[ &quot;${target}&quot; == *-freebsd* ]]; then
    export LDFLAGS=&quot;-lexecinfo&quot;
fi
./configure --prefix=${prefix} --build=${MACHTYPE} --host=${target}
make -j${nprocs}
make install</code></pre><p>See for example <a href="https://github.com/JuliaPackaging/Yggdrasil/pull/354">Yggdrasil#354</a> and <a href="https://github.com/JuliaPackaging/Yggdrasil/pull/982">Yggdrasil#982</a>.</p><h3 id="undefined-reference-to-environ&#39;"><a class="docs-heading-anchor" href="#undefined-reference-to-environ&#39;"><code>undefined reference to `environ&#39;</code></a><a id="undefined-reference-to-environ&#39;-1"></a><a class="docs-heading-anchor-permalink" href="#undefined-reference-to-environ&#39;" title="Permalink"></a></h3><p>This problem is caused by the <code>-Wl,--no-undefined</code> flag. Removing this flag may also fix the above problem with backtrace, if the undefined references appear together.</p><h2 id="Windows"><a class="docs-heading-anchor" href="#Windows">Windows</a><a id="Windows-1"></a><a class="docs-heading-anchor-permalink" href="#Windows" title="Permalink"></a></h2><h3 id="Libtool-refuses-to-build-shared-library-because-of-undefined-symbols"><a class="docs-heading-anchor" href="#Libtool-refuses-to-build-shared-library-because-of-undefined-symbols">Libtool refuses to build shared library because of undefined symbols</a><a id="Libtool-refuses-to-build-shared-library-because-of-undefined-symbols-1"></a><a class="docs-heading-anchor-permalink" href="#Libtool-refuses-to-build-shared-library-because-of-undefined-symbols" title="Permalink"></a></h3><p>When building for Windows, sometimes libtool refuses to build the shared library because of undefined symbols.  When this happens, compilation is successful but BinaryBuilder&#39;s audit can&#39;t find the expected <code>LibraryProduct</code>s.</p><p>In the log of compilation you can usually find messages like</p><pre><code class="nohighlight hljs">libtool: warning: undefined symbols not allowed in i686-w64-mingw32 shared libraries; building static only</code></pre><p>or</p><pre><code class="nohighlight hljs">libtool:   error: can&#39;t build i686-w64-mingw32 shared library unless -no-undefined is specified</code></pre><p>In these cases you have to pass the <code>-no-undefined</code> option to the linker, as explicitly suggested by the second message.</p><p>A proper fix requires to add the <code>-no-undefined</code> flag to the <code>LDFLAGS</code> of the corresponding libtool archive in the <code>Makefile.am</code> file.  For example, this is done in <a href="https://github.com/JuliaPackaging/Yggdrasil/blob/d1e5159beef7fcf8c631e893f62925ca5bd54bec/C/CALCEPH/build_tarballs.jl#L19"><code>CALCEPH</code></a>, <a href="https://github.com/JuliaPackaging/Yggdrasil/blob/d1e5159beef7fcf8c631e893f62925ca5bd54bec/E/ERFA/build_tarballs.jl#L17"><code>ERFA</code></a>, and <a href="https://github.com/JuliaPackaging/Yggdrasil/blob/d1e5159beef7fcf8c631e893f62925ca5bd54bec/L/libsharp2/build_tarballs.jl#L19"><code>libsharp2</code></a>.</p><p>A quick and dirty alternative to patching the <code>Makefile.am</code> file is to pass <code>LDFLAGS=-no-undefined</code> only to <code>make</code>:</p><pre><code class="language-sh hljs">FLAGS=()
if [[ &quot;${target}&quot; == *-mingw* ]]; then
    FLAGS+=(LDFLAGS=&quot;-no-undefined&quot;)
fi
./configure --prefix=${prefix} --build=${MACHTYPE} --host=${target}
make -j${nprocs} &quot;${FLAGS[@]}&quot;
make install</code></pre><p>Note that setting <code>LDFLAGS=-no-undefined</code> before <code>./configure</code> would make this fail because it would run a command like <code>cc -no-undefined conftest.c</code>, which upsets the compiler).  See for example <a href="https://github.com/JuliaPackaging/Yggdrasil/pull/170">Yggdrasil#170</a>, <a href="https://github.com/JuliaPackaging/Yggdrasil/pull/354">Yggdrasil#354</a>.</p><h3 id="Libtool-refuses-to-build-shared-library-because-&#39;-lmingw32&#39;-is-not-a-real-file"><a class="docs-heading-anchor" href="#Libtool-refuses-to-build-shared-library-because-&#39;-lmingw32&#39;-is-not-a-real-file">Libtool refuses to build shared library because &#39;-lmingw32&#39; is not a real file</a><a id="Libtool-refuses-to-build-shared-library-because-&#39;-lmingw32&#39;-is-not-a-real-file-1"></a><a class="docs-heading-anchor-permalink" href="#Libtool-refuses-to-build-shared-library-because-&#39;-lmingw32&#39;-is-not-a-real-file" title="Permalink"></a></h3><p>If you see errors like:</p><pre><code class="nohighlight hljs">[14:12:52] *** Warning: linker path does not have real file for library -lmingw32.
[14:12:52] *** I have the capability to make that library automatically link in when
[14:12:52] *** you link to this library.  But I can only do this if you have a
[14:12:52] *** shared version of the library, which you do not appear to have
[14:12:52] *** because I did check the linker path looking for a file starting
[14:12:52] *** with libmingw32 and none of the candidates passed a file format test
[14:12:52] *** using a file magic. Last file checked: /opt/x86_64-w64-mingw32/x86_64-w64-mingw32/sys-root/lib/libmingw32.a</code></pre><p>This is a bug in autoconf&#39;s AC<em>F77</em>LIBRARY<em>LDFLAGS (or AC</em>FC<em>LIBRARY</em>LDFLAGS) macro. A patch has been submitted to fix this upstream. In the meantime, you may be able to remove these macros. They are often not required.</p><h2 id="macOS"><a class="docs-heading-anchor" href="#macOS">macOS</a><a id="macOS-1"></a><a class="docs-heading-anchor-permalink" href="#macOS" title="Permalink"></a></h2><h3 id="CMake-complains-&quot;No-known-for-CXX-compiler&quot;"><a class="docs-heading-anchor" href="#CMake-complains-&quot;No-known-for-CXX-compiler&quot;">CMake complains &quot;No known for CXX compiler&quot;</a><a id="CMake-complains-&quot;No-known-for-CXX-compiler&quot;-1"></a><a class="docs-heading-anchor-permalink" href="#CMake-complains-&quot;No-known-for-CXX-compiler&quot;" title="Permalink"></a></h3><p>E.g. error messages like:</p><pre><code class="nohighlight hljs">CMake Error in CMakeLists.txt:
  No known features for CXX compiler

  &quot;Clang&quot;

  version 12.0.0.</code></pre><p>This issue is caused by not setting CMake policy CMP0025. This policy is supposed to only affect the CompilerId for AppleClang, but it also has the effect of turning off feature detection for upstream clang (which is what we&#39;re using here) on CMake versions prior to CMake 3.18. Add</p><pre><code class="nohighlight hljs">cmake_policy(SET CMP0025 NEW)</code></pre><p>At the very top of your CMakeLists.txt, before the project definition (or get an updated version of CMake).</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../FAQ/">« FAQ</a><a class="docs-footer-nextpage" href="../rootfs/">RootFS »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.16.1 on <span class="colophon-date" title="Sunday 30 November 2025 18:44">Sunday 30 November 2025</span>. Using Julia version 1.12.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
